<html>
	<head>
	<meta charset="UTF-8">
	<title>Newton timeline (local)</title>
	<script>
		Timeline_ajax_url="http://localhost/timeline/src/ajax/api/simile-ajax-api.js";
		Timeline_urlPrefix='http://localhost/timeline/src/webapp/api/'; 
		Timeline_parameters='bundle=true';
	</script>
	<script src="http://localhost/timeline/src/webapp/api/timeline-api.js?bundle=true" type="text/javascript"></script>


	</head>
	<body onload="onLoad();" onresize="onResize();">
		<script type="text/javascript">
			var tl;
			const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			var focus = "Aug 1 1680";
			if (urlParams.has('date')) {
				focus = urlParams.get('date');
			}
			function onLoad()  {
				var focusDate = focus;
				var calendarSource = new Timeline.DefaultEventSource(0);
				var otherworkSource = new Timeline.DefaultEventSource(1);
				var chymistrySource = new Timeline.DefaultEventSource(2)
				var literatureSource = new Timeline.DefaultEventSource(3)
				var bandInfos = [
					Timeline.createBandInfo({
							eventSource:	calendarSource,
							date:	focusDate,
							width:	  "10%",
							intervalUnit:  Timeline.DateTime.MONTH,
							intervalPixels:  30
					}),
					Timeline.createBandInfo({
							eventSource:	otherworkSource,
							date:	focusDate,
							width:	  "10%",
							intervalUnit:  Timeline.DateTime.MONTH,
							intervalPixels:  30
					}),
					Timeline.createBandInfo({
							eventSource:	chymistrySource,
							date:	focusDate,
							width:	  "35%",
							intervalUnit:  Timeline.DateTime.MONTH,
							intervalPixels:  30
					}),
					Timeline.createBandInfo({
							showEventText:	false,
							trackHeight:	0.5,
							trackGap:	0.2,
							date:	focusDate,
							width:	"5%",
							intervalUnit:	Timeline.DateTime.YEAR,
							intervalPixels: 50
					}),
					Timeline.createBandInfo({
							eventSource:	literatureSource,
							date:	focusDate,
							width:	  "40%",
							intervalUnit:  Timeline.DateTime.DECADE,
							intervalPixels:  150
					})
				];
				bandInfos[1].syncWith = 0;
				bandInfos[1].highlight = false;
				bandInfos[2].syncWith = 0;
				bandInfos[2].highlight = false;
				bandInfos[3].syncWith = 0;
				bandInfos[3].highlight = true;
				bandInfos[4].syncWith = 0;
				bandInfos[4].highlight = true;
				
				tl = Timeline.create(document.getElementById("timelineFrame"), bandInfos);
				
				Timeline.loadXML("newton-calendar.xml", function(xml, url) {
						calendarSource.loadXML(xml, url);
				});
				Timeline.loadXML("newton-other-work.xml", function(xml, url) {
						otherworkSource.loadXML(xml, url);
				});
				Timeline.loadXML("newton-chymistry.xml", function(xml, url) {
						chymistrySource.loadXML(xml, url);
				});
				Timeline.loadXML("chym-lit.xml", function(xml, url) {
						literatureSource.loadXML(xml, url);
				});
			}
			
			var resizeTimerID = null;
			function onResize()  {
				if (resizeTimerID == null)  {
					resizeTimerID = window.setTimeout(function()  {
							resizeTimerID = null;
							tl.layout();
					}, 500);
				}
			}
		</script>
		<div id="timelineFrame" style="height: 1000px; border: 1px solid #aaa"></div>
		<div>
			<p><br><a href="./FHP-images.html" target="_blank">Link to FHP gallery</a><br><br></p>
			<p><b>[Abbreviations]</b></p>
			<ul>
			<li>BDG / <a href="https://iu.app.box.com/file/550444264209" target="_blank">Shapiro, "Beyond the Dating Game" (1992) Box</a></li>
			<li>DTW / D.T. Whiteside</li>
			<li>FHP / <a href="https://iu.app.box.com/file/156886511511" target="_blank">Figala, Harrison*, Petzold, "De Sriptoribus Chemicis" (1992) Box</a></li>
			<li>HNL / Harrison, <em>Newton's Library</em> (1978)</li>
			<li>NAR / Westfall, <em>Never at Rest</em> (1980)</li>
			<li>NTA	/ Newman, <em>Newton the Alchemist</em> (2019)</li>
			<li>PON / Iliffe, <em>Priest of Nature</em> (2017)</li>
			</ul>
		</div>
	</body>
</html>